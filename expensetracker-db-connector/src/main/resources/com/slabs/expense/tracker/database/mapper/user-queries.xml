<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.slabs.expense.tracker.database.mapper.UserMapper">

	<insert id="createUser" parameterType="com.slabs.expense.tracker.common.db.entity.UserInfo">
		insert into EXPENSETRACKER.USERINFO(FIRSTNAME, LASTNAME, SEX, USERNAME,PASSWORD,EMAIL,MOBILE,ADDRESS)
		values(
		#{record.firstName},
		#{record.lastName},
		#{record.sex},
		#{record.username},
		#{record.password},
		#{record.email},
		#{record.mobile},
		#{record.address}
		)
	</insert>

	<update id="updateUser">
		update EXPENSETRACKER.USERINFO
		<set>
			<if test="record.firstName != null">
				firstName=#{record.firstName},
			</if>
			<if test="record.lastName != null">
				lastName=#{record.lastName},
			</if>
			<if test="record.sex != null">
				sex=#{record.sex},
			</if>
			<if test="record.newPassword != null">
				password=#{record.newPassword},
			</if>
			<if test="record.email != null">
				email=#{record.email},
			</if>
			<if test="record.mobile != null">
				mobile=#{record.mobile},
			</if>
			<if test="record.address != null">
				address=#{record.address}
			</if>
		</set>
		where username=#{record.username}
	</update>

	<select id="getUser" resultType="com.slabs.expense.tracker.common.db.entity.UserInfo">
		select FIRSTNAME, LASTNAME, SEX, USERNAME, EMAIL, MOBILE,ADDRESS
		<if test="includePassword">
			,PASSWORD
		</if>
		from EXPENSETRACKER.USERINFO
		<if test="username != null">
			where username=#{username}
		</if>
	</select>

	<delete id="deleteUser">
		delete from EXPENSETRACKER.USERINFO where username=#{record.username}
	</delete>

</mapper>